<h1>【MHXX】クエスト一覧</h1>
<div class="mb-3">
  <%= form_with url: mhxx_quests_path, method: :get, local: true do |f| %>
    <%# ランク選択 %>
    <%# TODO: お気に入り追加 %>
    <div class="d-flex">
      <label for="lap" class="form-label">ランク：</label>
      <div class="ms-3">
        <%= f.collection_radio_buttons(
          :rank_radio,
          Mhxx::MQuestRank.with_all_option,
          :last,
          :first,
          checked: (params[:rank_radio] || '0'),
          item_wrapper_class: 'form-check form-check-inline',
          label_class: 'form-check-label'
        ) do |b| %>
          <%= b.radio_button(class: 'form-check-input', name: 'rank_radio') %>
          <%= b.label %>
        <% end %>
      </div>
    </div>
    <%# クエスト選択 %>
    <%= select_tag :rank_number, options_for_select([["すべて", 0]], params[:rank_number]), class: "form-select mb-3", id: "rank_number", data: { selected: params[:rank_number] } %>
    <%# ボタンエリア %>
    <%= f.submit '検索', class: 'btn btn-primary' %>
  <% end %>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th class="col">No</th>
      <th class="col">クエスト名</th>
      <th class="col">タイム</th>
      <th class="col">武器種/スタイル</th>
      <th class="col">武器名</th>
      <th class="col">Action</th>
    </th>
  </thead>
  <tbody>
    <% @quests.each_with_index do |quest, index| %>
      <% best_time = @times[quest.id]&.min_by(&:clear_time) %>
      <tr>
        <th scope="row" class="align-middle"><%= index + 1 %></th>
        <td class="align-middle"><%= quest.name %></td>
        <td class="align-middle"><%= best_time.present? ? formatted_clear_time(best_time.clear_time) : "-" %></td>
        <td class="align-middle"><%= best_time.present? ? "#{best_time.m_hunting_style.name}/#{best_time.m_weapon.m_weapon_type.name}" : "-"  %></td>
        <td class="align-middle"><%= best_time.present? ? best_time.m_weapon.name : "-" %></td>
        <td class="align-middle d-flex justify-content-between">
          <div>
            <%= link_to "タイム一覧", mhxx_quest_path(quest.id), class: 'btn btn-outline-primary' %>
            <%= link_to "タイム登録", new_mhxx_time_path, class: 'btn btn-outline-primary' %>
          </div>
          <div>
            <%= link_to("#", {method: "post"}) do %>
              <i class="fa-solid fa-star"></i>
            <% end %>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<h1>Enum確認</h1>
<p>クエストマスタ：<%= Mhxx::MQuest.first.quest_division %> </p>
<p>クエストマスタ：<%= I18n.t("enums.mhxx.quest_division.#{Mhxx::MQuest.first.quest_division}") %> </p>
<p>武器種マスタ：<%= I18n.t("enums.mhxx.weapon_type_division.#{Mhxx::MWeaponType.first.weapon_type_division}") %> </p>
<p>武器マスタ：<%= I18n.t("enums.mhxx.element.#{Mhxx::MWeapon.first.element}") %> </p>
